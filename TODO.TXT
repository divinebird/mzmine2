BUGS

show chromatogram quick from missing peak -> 
[17:27:46|SEVERE|WorkerThread]: Unhandled exception java.lang.NullPointerException while processing task Updating TIC visualizer of Blood 500ul SAM00076 NEG(java.lang.NullPointerException@net.sf.mzmine.util.Range.isWithin(Range.java:159))
java.lang.NullPointerException
	at net.sf.mzmine.util.Range.isWithin(Range.java:159)
	at net.sf.mzmine.modules.visualization.tic.TICDataSet.run(TICDataSet.java:126)
	at net.sf.mzmine.taskcontrol.impl.WorkerThread.run(WorkerThread.java:60)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
	at net.sf.mzmine.modules.visualization.tic.TICVisualizerWindow.updateTitle(TICVisualizerWindow.java:130)
	at net.sf.mzmine.modules.visualization.tic.TICPlot.chartProgress(TICPlot.java:364)
	at org.jfree.chart.JFreeChart.notifyListeners(JFreeChart.java:1560)
	at org.jfree.chart.JFreeChart.draw(JFreeChart.java:1241)
	at org.jfree.chart.ChartPanel.paintComponent(ChartPanel.java:1677)
	at javax.swing.JComponent.paint(JComponent.java:1029)
	at javax.swing.JComponent.paintChildren(JComponent.java:862)
	at javax.swing.JComponent.paint(JComponent.java:1038)
	at javax.swing.JComponent.paintChildren(JComponent.java:862)
	at javax.swing.JComponent.paint(JComponent.java:1038)
	at javax.swing.JLayeredPane.paint(JLayeredPane.java:567)
	at javax.swing.JComponent.paintChildren(JComponent.java:862)
	at javax.swing.JComponent.paint(JComponent.java:1038)
	

- fragment scan info is lost (h vs p project 4)

mz range paramteter - add FROM FORMULA (formula, ionization type, mass tolerance)

* locales when using some input components (e.g. Neutral mass)
* mnemonic conflict (Chris)
* batch queue save
* support referenceable parameters in mzML
* delete rows throws exception

* chromatogram deconvolution bug (desktop)
* manual has missing figures
* RT tolerance value turns strange

Manual --> google docs
don't change window size when loading project

3D visualizer needs a toggle to estimate missing data points, sometimes shows Grid2D exception - does not form valid grid


Future improvements

* mettrack/ metfrag / metfusion

* optimize speed of isotope generation and score calculation

* Sweeney RationalNumbers search

* Fisher values

* add "how to set this parameter", or parameter guessing

* upgrade to axis2 - KEGG API does not work!

* Visualizers improvement
	- layers
	- better title ("Peaklist XX", "Scatter plot XX")
	- context menu "show in table, show in 2D etc"

* Scatter plot - check the array of peaks for counterparts without signal and set the counterpart signal to e.g. 0.00001. 
    Perhaps we could label these components differently to indicate the mathematical manipulation.


Note: how to make a release of MZmine:

* check version number in MZmineVersion class
* check adducts encoding in IonizationType class
* check startMZmine_Windows.bat end of line chars



OLD TODO LIST


***** Core modules *****

Desktop
* When data file or peak list is removed, all visualizers showing this file/peak list should be 
  closed as well, otherwise exceptions may occur

Data model
* Perhaps columns in peak list table should not be indexed by RawDataFile, but instead by a String
  (title). This way we can introduce calculated columns (e.g. fold change, or average of several
  samples) 

Project saving/loading
* Project parameters are lost after saving/loading project

***** Raw data import *****

mzXML parsing
* MS/MS scans (<scan> elements) can be nested or not. Currently, MZmine only 
  recognizes nested version

Polarity support
* polarity attribute (+/-/?) should be added to Scan interface and import modules
  should recognize polarity
   

***** Raw data filtering *****

These algorithms are almost unchanged since original MZmine 1.
We should think how they can be applied to high-resolution data. 
Probably we need to improve the algorithms.
We may also consider implementing some preview mechanism, similar
to peak detection.


***** Visualizers *****

2D visualizer
* Need to set threshold for how many peaks will be annotated (Sandra)
* Color scale should be editable, similar as color scale of RT/MZ plots
* Intensity scale is now relative to the zoomed area. There should be a 
  setting to make it absolute (e.g. when comparing two files) 

3D visualizer
* Need to set threshold for how many peaks will be annotated
* There should be a setting for the intensity scale (e.g. when comparing
  two files)
* There should be a switch whether missing points in the grid should be
  approximated - makes sense only for continuous mode when looking in high
  detail
* Bug: 3D visualizer sometimes cannot start and throws this exception:
   visad.SetException: Gridded2DSet: samples do not form a valid grid
   especially when showing centroided data in detail?	 

Peak list table
* There should be another column "fold-change", user can select which samples/parameters are compared
* We need a function to show a specific row of the peak list, this should be easy to activate from
  other plots (e.g. scatter plot)


Scatter plot
* Scatter plot should be able to show average value from a group of samples 
  (defined by sample parameter)


Peak list row summary visualizer
* After changing the peak using manual picker, the row summary is not updated


***** Alignment *****

Join Alignment
* Bug: When there is an error during the process, the frames for the messages appears empty. 
  To reproduce it: try doing the alignment with two peak list with more than one sample 
  each list, and the option "compare isotope pattern" activated.
* Fragment aligner and join aligner should be integrated, with some option to run alignment
  by parallel tasks


***** Normalization *****

* NOMIS method?


***** Data analysis *****

RT/mz plots
* Color axis needs more informative title - instead of "Logratio" it should say 
  e.g. "log2(avg peak area(file1, file2) / avg peak area (file3, file4))"
* Setup dialog should use project parameters to split samples to groups

PCA plot
* Bug: PCA plot may freeze if data contains Double.NaN


***** MZviewer *****

MZviewer needs better integration with MainWindow (window title etc.) and MainMenu.


***** Documentation *****

Write documentation for the new code
* Comments in critical parts of the code (algorithms)
* Help files
* User's manual.
